import{l as v,u as y,m as w,r as n,j as e,n as N}from"./index-BcnzSye9.js";import{a as j}from"./index-Dq7h7Pqt.js";const R=()=>{const x="https://kma-website.onrender.com/api/v1",{eventId:o}=v(),p=y(),a=w.find(t=>{const l=t.id.toString();if(t)return l===o});if(!a)throw new Error("event not found");const[i,f]=n.useState(""),[c,g]=n.useState(""),[s,h]=n.useState(1),[d,m]=n.useState(!1),u=a.price,b=async t=>{t.preventDefault(),m(!0);const l=u*s/100;try{const r=await j.post(`${x}/reservations`,{name:i,eventName:a.title,location:a.location,date:a.date,email:c,quantity:s,amount:l,eventId:o},{headers:{"Content-Type":"application/json"}});console.log(r.data),p(`/payment/${r.data._id}`,{state:{amount:l}}),alert("Reservation successful!")}catch(r){console.error(r),alert("Something went wrong!")}finally{m(!1)}};return e.jsxs("div",{className:"bg-[#f6f4f0] flex  flex-col md:flex-row h-screen gap-3 md:gap-0 md:p-5 md:pt-24",children:[e.jsx("div",{className:"w-full md:w-1/2 flex item-center pt-20 ",children:e.jsxs("form",{onSubmit:b,className:"space-y-8 max-w-lg mx-auto p-6 bg-white shadow rounded ",children:[e.jsx("h2",{className:"text-4xl font-semibold mb-10 text-center text-gray-700",children:"Reserve Your Tickets"}),e.jsx("input",{className:"border p-2 w-full",placeholder:"Name",value:i,onChange:t=>f(t.target.value),required:!0}),e.jsx("input",{className:"border p-2 w-full",placeholder:"Email",type:"email",value:c,onChange:t=>g(t.target.value),required:!0}),e.jsx("input",{className:"border p-2 w-full",type:"number",placeholder:"Number of tickets",min:1,value:s,onChange:t=>h(Number(t.target.value)),required:!0}),e.jsxs("p",{className:"font-medium text-5xl font-playfair text-center text-gray-700",children:["Total: PHP ",u*s/100,".00"]}),e.jsx("button",{type:"submit",className:"w-full font-medium cursor-pointer mt-4 mb-5 py-4 px-6 rounded-[5px] bg-gradient-to-l from-yellow-400 via-yellow-500 to-yellow-600 hover:text-blue-950 transition-colors duration-200 text-gray-700 text-xl shadow-xl",disabled:d,children:d?"Processing...":"Make Reservation"})]})}),e.jsx("div",{className:"bg-[#121820]/60 bg-blend-overlay  bg-no-repeat bg-cover bg-center w-full  md:w-1/2  md:rounded-2xl pt-10 md:pt-25 pb-5 px-5 md:px10 text-white",style:{backgroundImage:`url(${a.image})`},children:e.jsxs("div",{className:"h-full flex flex-col justify-center items-center space-y-3",children:[e.jsx("h1",{className:"text-5xl font-bold font-playfair text-center",children:a.title}),e.jsx("p",{className:"text-3xl font-playfair",children:a.date}),e.jsxs("p",{className:"font-playfair flex items-center",children:[e.jsx("span",{children:e.jsx(N,{className:"h-4 w-4"})}),a.location]})]})})]})};export{R as default};
