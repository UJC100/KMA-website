import{l as w,u as j,m as N,r,j as e,n as S}from"./index-DzlrIyeW.js";import{a as k}from"./index-Dq7h7Pqt.js";import{a as C,A as E}from"./Snackbar-C_gx5quk.js";import"./clsx-B-dksMZM.js";import"./createSimplePaletteValueFilter-9D2-7BJR.js";const A=()=>{const f="https://kma-website.onrender.com/api/v1",{eventId:c}=w(),g=j(),a=N.find(t=>{const l=t.id.toString();if(t)return l===c});if(!a)throw new Error("event not found");const[m,h]=r.useState(""),[d,v]=r.useState(""),[n,b]=r.useState(1),[u,p]=r.useState(!1),[s,o]=r.useState({open:!1,message:"",severity:"success"}),x=a.price,y=async t=>{t.preventDefault(),p(!0);const l=x*n/100;try{const i=await k.post(`${f}/reservations`,{name:m,eventName:a.title,location:a.location,date:a.date,email:d,quantity:n,amount:l,eventId:c},{headers:{"Content-Type":"application/json"}});console.log(i.data),g(`/payment/${i.data._id}`,{state:{amount:l}}),o({open:!0,message:"Form submitted successfully!",severity:"success"})}catch(i){console.error(i),o({open:!0,message:"Form submission failed. Please try again.",severity:"error"})}finally{p(!1)}};return e.jsxs("div",{className:"bg-[#f6f4f0] flex  flex-col md:flex-row h-screen gap-3 md:gap-0 md:p-5 md:pt-24",children:[e.jsx(C,{open:s.open,autoHideDuration:4e3,onClose:()=>o({...s,open:!1}),anchorOrigin:{vertical:"top",horizontal:"center"},children:e.jsx(E,{elevation:6,variant:"filled",severity:s.severity,onClose:()=>o({...s,open:!1}),children:s.message})}),e.jsx("div",{className:"w-full md:w-1/2 flex item-center pt-20 ",children:e.jsxs("form",{onSubmit:y,className:"space-y-8 max-w-lg mx-auto p-6 bg-white shadow rounded ",children:[e.jsx("h2",{className:"text-4xl font-semibold mb-10 text-center text-gray-700",children:"Reserve Your Tickets"}),e.jsx("input",{className:"border p-2 w-full",placeholder:"Name",value:m,onChange:t=>h(t.target.value),required:!0}),e.jsx("input",{className:"border p-2 w-full",placeholder:"Email",type:"email",value:d,onChange:t=>v(t.target.value),required:!0}),e.jsx("input",{className:"border p-2 w-full",type:"number",placeholder:"Number of tickets",min:1,value:n,onChange:t=>b(Number(t.target.value)),required:!0}),e.jsxs("p",{className:"font-medium text-5xl font-playfair text-center text-gray-700",children:["Total: PHP ",x*n/100,".00"]}),e.jsx("button",{type:"submit",className:"w-full font-medium cursor-pointer mt-4 mb-5 py-4 px-6 rounded-[5px] bg-gradient-to-l from-yellow-400 via-yellow-500 to-yellow-600 hover:text-blue-950 transition-colors duration-200 text-gray-700 text-xl shadow-xl",disabled:u,children:u?"Processing...":"Make Reservation"})]})}),e.jsx("div",{className:"bg-[#121820]/60 bg-blend-overlay  bg-no-repeat bg-cover bg-center w-full  md:w-1/2  md:rounded-2xl pt-10 md:pt-25 pb-5 px-5 md:px10 text-white",style:{backgroundImage:`url(${a.image})`},children:e.jsxs("div",{className:"h-full flex flex-col justify-center items-center space-y-3",children:[e.jsx("h1",{className:"text-5xl font-bold font-playfair text-center",children:a.title}),e.jsx("p",{className:"text-3xl font-playfair",children:a.date}),e.jsxs("p",{className:"font-playfair flex items-center",children:[e.jsx("span",{children:e.jsx(S,{className:"h-4 w-4"})}),a.location]})]})})]})};export{A as default};
