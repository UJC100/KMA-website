import{l as N,u as k,m as S,r as s,j as e,n as P}from"./index-BWwxOs2N.js";import{a as T}from"./index-Dq7h7Pqt.js";import{a as C,A as E}from"./Snackbar-DwnQ4Rij.js";import"./clsx-B-dksMZM.js";import"./createSimplePaletteValueFilter-Drej5mQq.js";const U=()=>{const h="https://kingdom-mentorship-academy.com/api/v1",{eventId:m}=N(),b=k(),a=S.find(t=>{const i=t.id.toString();if(t)return i===m});if(!a)throw new Error("event not found");const[u,g]=s.useState(""),[p,y]=s.useState(""),[d,v]=s.useState(""),[o,j]=s.useState(1),[x,f]=s.useState(!1),[r,n]=s.useState({open:!1,message:"",severity:"success"});let l;switch(d){case"VIP":l=a.vipPrice;break;case"COUPLES":l=a.couplesPrice;break;default:l=a.regularPrice;break}const w=async t=>{t.preventDefault(),f(!0);const i=l*o/100;try{const c=await T.post(`${h}/reservations`,{name:u,eventName:a.title,location:a.location,date:a.date,email:p,ticketType:d,quantity:o,amount:i,eventId:m},{headers:{"Content-Type":"application/json"}});console.log(c.data),b(`/payment/${c.data._id}`,{state:{amount:i}}),n({open:!0,message:"Form submitted successfully!",severity:"success"})}catch(c){console.error(c),n({open:!0,message:"Form submission failed. Please try again.",severity:"error"})}finally{f(!1)}};return e.jsxs("div",{className:"bg-[#f6f4f0] flex  flex-col md:flex-row h-screen gap-3 md:gap-0 md:p-5 md:pt-24",children:[e.jsx(C,{open:r.open,autoHideDuration:4e3,onClose:()=>n({...r,open:!1}),anchorOrigin:{vertical:"top",horizontal:"center"},children:e.jsx(E,{elevation:6,variant:"filled",severity:r.severity,onClose:()=>n({...r,open:!1}),children:r.message})}),e.jsx("div",{className:"w-full md:w-1/2 flex item-center pt-20 ",children:e.jsxs("form",{onSubmit:w,className:"space-y-8 max-w-lg mx-auto p-6 bg-white shadow rounded ",children:[e.jsx("h2",{className:"text-4xl font-semibold mb-10 text-center text-gray-700",children:"Reserve Your Tickets"}),e.jsx("input",{className:"w-full border border-gray-300 px-4 py-2 rounded-md text-black/70 placeholder-black/70 placeholder:italic",placeholder:"Name",value:u,onChange:t=>g(t.target.value),required:!0}),e.jsx("input",{className:"w-full border border-gray-300 px-4 py-2 rounded-md text-black/70 placeholder-black/70 placeholder:italic",placeholder:"Email",type:"email",value:p,onChange:t=>y(t.target.value),required:!0}),e.jsx("div",{children:e.jsxs("select",{name:"Ticket Type",value:d,onChange:t=>v(t.target.value),className:"w-full border border-gray-300 px-4 py-2 rounded-md text-black/70",children:[e.jsx("option",{value:"",disabled:!0,selected:!0,className:"italic",children:"Ticket Type"}),e.jsx("option",{children:"REGULAR"}),e.jsx("option",{children:"VIP"}),e.jsx("option",{children:"COUPLES"})]})}),e.jsx("input",{className:"w-full border border-gray-300 px-4 py-2 rounded-md text-black/70 placeholder-black/70 ",type:"number",placeholder:"Number of tickets",min:1,value:o,onChange:t=>j(Number(t.target.value)),required:!0}),e.jsxs("p",{className:"font-medium text-5xl font-playfair text-center text-gray-700",children:["Total: PHP ",l*o/100,".00"]}),e.jsx("button",{type:"submit",className:"w-full font-medium cursor-pointer mt-4 mb-5 py-4 px-6 rounded-[5px] bg-gradient-to-l from-yellow-400 via-yellow-500 to-yellow-600 hover:text-blue-950 transition-colors duration-200 text-gray-700 text-xl shadow-xl",disabled:x,children:x?"Processing...":"Make Reservation"})]})}),e.jsx("div",{className:"bg-[#121820]/60 bg-blend-overlay  bg-no-repeat bg-cover bg-center w-full  md:w-1/2  md:rounded-2xl pt-10 md:pt-25 pb-5 px-5 md:px10 text-white",style:{backgroundImage:`url(${a.image})`},children:e.jsxs("div",{className:"h-full flex flex-col justify-center items-center space-y-3",children:[e.jsx("h1",{className:"text-5xl font-bold font-playfair text-center",children:a.title}),e.jsx("p",{className:"text-3xl font-playfair",children:a.date}),e.jsxs("p",{className:"font-playfair flex items-center",children:[e.jsx("span",{children:e.jsx(P,{className:"h-4 w-4"})}),a.location]})]})})]})};export{U as default};
